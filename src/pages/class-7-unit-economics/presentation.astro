---
/**
 * Class 7: Unit Economics - LTV & COCA
 * Theme 4 (Amber) - How do you make money?
 * DE Steps 17-19
 */
import PresentationLayout from '../../layouts/PresentationLayout.astro';
import TitleSlide from '../../components/presentation/TitleSlide.astro';
import StatementSlide from '../../components/presentation/StatementSlide.astro';
import TwoPartSlide from '../../components/presentation/TwoPartSlide.astro';
import StandardSlide from '../../components/presentation/StandardSlide.astro';
import IconCard from '../../components/presentation/IconCard.astro';
import MetricCard from '../../components/presentation/MetricCard.astro';
import ComparisonGrid from '../../components/presentation/ComparisonGrid.astro';
import ComparisonCard from '../../components/presentation/ComparisonCard.astro';
import Slide from '../../components/presentation/Slide.astro';

// Load narration data for captions
import narrationData from '../../content/classes/7-unit-economics/narration.json';

// Get base URL for asset paths
const base = import.meta.env.BASE_URL;
---

<PresentationLayout title="Class 7: Unit Economics" themeNumber={4} classNumber={7} narration={narrationData}>
    <style>
        /* Extended theme variables for this presentation */
        :root {
            --theme-color-dim: var(--brand-accent);
            --theme-amber-light: #fbbf24;
            --gradient-hero: linear-gradient(135deg, var(--brand-accent) 0%, var(--theme-color) 100%);
        }

        /* Metrics Grid */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            max-width: 800px;
            margin: 40px auto;
        }

        /* Formula Display */
        .formula-display {
            background: var(--dark-surface);
            border: 2px solid var(--theme-color);
            border-radius: 20px;
            padding: 50px 80px;
            text-align: center;
            max-width: 800px;
            margin: 40px auto;
        }

        .formula-display .formula {
            font-size: 2.5rem;
            font-weight: 700;
            font-family: Georgia, serif;
        }

        .formula-display .formula span {
            color: var(--theme-color);
        }

        /* Calculation Steps */
        .calculation-steps {
            max-width: 700px;
            margin: 0 auto;
        }

        .calc-step {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 30px;
            background: var(--dark-surface);
            border-radius: 12px;
            margin-bottom: 15px;
            opacity: 0;
            transform: translateX(-30px);
            transition: all 0.5s ease;
        }

        :global(.slide.active) .calc-step {
            opacity: 1;
            transform: translateX(0);
        }

        /* Stagger delays for calc-steps */
        :global(.slide.active) .calc-step:nth-child(1) { transition-delay: 200ms; }
        :global(.slide.active) .calc-step:nth-child(2) { transition-delay: 400ms; }
        :global(.slide.active) .calc-step:nth-child(3) { transition-delay: 600ms; }
        :global(.slide.active) .calc-step:nth-child(4) { transition-delay: 800ms; }

        .calc-step .label {
            font-size: 1.3rem;
            color: var(--text-secondary);
        }

        .calc-step .value {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--theme-color);
            font-family: var(--font-mono);
        }

        .calc-step.result {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.2) 0%, transparent 100%);
            border: 2px solid var(--theme-color);
        }

        .calc-step.result .value {
            font-size: 2rem;
        }

        /* Retention Bars */
        .retention-bars {
            display: flex;
            flex-direction: column;
            gap: 30px;
            max-width: 800px;
            margin: 40px auto;
        }

        .retention-row {
            display: grid;
            grid-template-columns: 120px 1fr 100px;
            align-items: center;
            gap: 20px;
        }

        .retention-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        .retention-bar-container {
            height: 50px;
            background: var(--dark-surface);
            border-radius: 8px;
            overflow: hidden;
        }

        .retention-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--theme-color), var(--theme-amber-light));
            border-radius: 8px;
            width: 0;
            transition: width 1.5s ease-out;
        }
        
        /* Ideally we'd set width based on state, but without JS we might hardcode widths in specific slides/classes 
           or use inline styles with a transition on load. 
           Since existing code used JS to probably set width, we might need a workaround for pure CSS bars.
           Or we can just rely on the bar having a width set inline and transition on opacity/transform as a simpler fallback.
           Wait, previous code didn't actually have JS to set widths, it just had a class. 
           Actually, the file read didn't show JS setting widths. It might have been hardcoded or I missed it.
           I'll assume inline styles for width are needed or already present if I look carefully? 
           The code had `<div class="retention-bar" style="width: 80%"></div>` likely.
           I'll ensure animations work by toggling a class? No, pure CSS: 
           width transition happens when .slide.active class is added to parent.
        */
        :global(.slide.active) .retention-bar {
            /* This needs the element to have a target width style, 
               but transition from 0. The easiest way without JS computation 
               is to set width in style attribute and have a starting state.
               BUT I can't set "starting state" easily without component logic.
               Alternative: Use transform: scaleX().
            */
            transform-origin: left;
            animation: growBar 1s ease-out forwards;
        }

        @keyframes growBar {
            from { transform: scaleX(0); }
            to { transform: scaleX(1); }
        }

        .retention-value {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--theme-color);
            font-family: var(--font-mono);
        }

        /* Levers Grid */
        .levers-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            max-width: 1000px;
            margin: 30px auto;
        }

        .lever-column {
            background: var(--dark-surface);
            border-radius: 20px;
            padding: 30px;
        }

        .lever-column h3 {
            font-size: 1.5rem;
            margin-bottom: 25px;
            color: var(--success-green);
            text-align: center;
            font-family: var(--font-display);
        }

        .lever-column.decrease h3 {
            color: var(--theme-color);
        }

        .lever-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.02);
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.4s ease;
        }

        :global(.slide.active) .lever-item {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Stagger levers */
        :global(.slide.active) .lever-item:nth-child(1) { transition-delay: 200ms; }
        :global(.slide.active) .lever-item:nth-child(2) { transition-delay: 350ms; }
        :global(.slide.active) .lever-item:nth-child(3) { transition-delay: 500ms; }

        .lever-item .icon {
            font-size: 1.5rem;
        }

        .lever-item .text {
            font-size: 1.1rem;
        }

        /* Collapse result */
        .collapse-result {
            text-align: center;
            margin-top: 40px;
        }

        .collapse-result .before-after {
            font-size: 4rem;
            margin-bottom: 40px;
        }

        .collapse-result .strike {
            color: var(--text-secondary);
            text-decoration: line-through;
        }

        .collapse-result .final {
            color: var(--danger-red);
            font-weight: 700;
        }

        .collapse-icons {
            display: flex;
            justify-content: center;
            gap: 60px;
            margin-top: 50px;
        }

        .collapse-icon {
            text-align: center;
        }

        .collapse-icon .emoji {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .collapse-icon .text {
            color: var(--danger-red);
        }

        /* Appendix */
        .ltv-breakdown {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            max-width: 900px;
            margin: 1.5rem auto;
        }

        .ltv-factor {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
        }

        .ltv-factor h4 {
            color: var(--theme-color);
            font-size: 1.1rem;
            margin-bottom: 0.75rem;
            font-family: var(--font-display);
        }

        .ltv-factor .range {
            font-family: var(--font-mono);
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .ltv-factor p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Components Grid for COCA */
        .components-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            max-width: 900px;
            margin: 30px auto;
        }

        .component-box {
            background: var(--dark-surface);
            border-radius: 16px;
            padding: 25px;
        }

        .component-box h3 {
            font-size: 1.4rem;
            margin-bottom: 20px;
            color: var(--theme-color);
            font-family: var(--font-display);
        }

        .component-box ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .component-box li {
            padding: 8px 0;
            font-size: 1.1rem;
            color: var(--text-secondary);
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .component-box li:last-child {
            border-bottom: none;
        }

        /* Costs Table */
        .costs-table {
            width: 100%;
            max-width: 500px;
            margin: 20px auto;
            border-collapse: collapse;
        }

        .costs-table th,
        .costs-table td {
            padding: 15px 20px;
            text-align: left;
            font-size: 1.2rem;
        }

        .costs-table th {
            color: var(--text-secondary);
            font-weight: 500;
            border-bottom: 2px solid var(--theme-color);
        }

        .costs-table td {
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .costs-table td:last-child {
            text-align: right;
            font-family: var(--font-mono);
            color: var(--theme-color);
        }

        .costs-table tr.total {
            font-weight: 700;
        }

        .costs-table tr.total td {
            border-top: 2px solid var(--theme-color);
            border-bottom: none;
        }

        /* Homework Items */
        .homework-item {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 20px;
            background: var(--dark-surface);
            border-radius: 12px;
            margin-bottom: 15px;
            opacity: 0;
            transform: translateX(-20px);
            transition: all 0.4s ease;
        }

        :global(.slide.active) .homework-item {
            opacity: 1;
            transform: translateX(0);
        }

        :global(.slide.active) .homework-item:nth-child(1) { transition-delay: 200ms; }
        :global(.slide.active) .homework-item:nth-child(2) { transition-delay: 400ms; }
        :global(.slide.active) .homework-item:nth-child(3) { transition-delay: 600ms; }
        :global(.slide.active) .homework-item:nth-child(4) { transition-delay: 800ms; }

        .homework-icon {
            font-size: 2rem;
        }

        .homework-text {
            font-size: 1.2rem;
            color: var(--text-secondary);
        }

        /* Pulse animation for formula */
        .pulse {
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.4); }
            50% { box-shadow: 0 0 20px 10px rgba(245, 158, 11, 0.2); }
        }
    </style>

    <!-- Slide 1: Title -->
    <TitleSlide
        id="1"
        narrationKey="1"
        section="Opening"
        title="Will You Make Money?"
        subtitle="LTV, COCA & The Crucial Ratio"
        info="Class 7 | DE Steps 17, 18, 19"
    />

    <!-- OPENING: THE REALITY -->
    <StatementSlide id="2" narrationKey="2" title="The Reality">
        A business isn't viable if it costs <span class="accent">more</span> to get a customer than that customer is <span class="accent">worth</span>.
    </StatementSlide>

    <!-- WEWORK STORY -->
    <StandardSlide id="3" narrationKey="3" section="Story" title="WeWork 2019" type="visual">
        <div class="metrics-grid">
            <MetricCard value="$47B" label="Valuation" delay="100"/>
            <MetricCard value="Exponential" label="Growth" delay="200"/>
            <MetricCard value="700+" label="Locations" delay="300"/>
            <MetricCard value="Glowing" label="Press Coverage" delay="400"/>
        </div>
    </StandardSlide>

    <StandardSlide id="4" narrationKey="4" title="WeWork Reality" type="visual">
        <div class="metrics-grid">
            <MetricCard value="$millions" label="Cost per location" danger={true} delay="100"/>
            <MetricCard value="5+ years" label="Time to profit" danger={true} delay="200"/>
            <MetricCard value="Too High" label="Churn rate" danger={true} delay="300"/>
            <MetricCard value="Negative" label="LTV/COCA Ratio" danger={true} delay="400"/>
        </div>
    </StandardSlide>

    <StandardSlide id="5" narrationKey="5" title="The Collapse" type="visual">
        <div class="collapse-result">
            <div class="before-after">
                <span class="strike">$47B</span>
                <span style="color: var(--text-secondary); margin: 0 30px;">‚Üí</span>
                <span class="final">$9B</span>
            </div>
            <div class="collapse-icons">
                <div class="collapse-icon">
                    <div class="emoji">üëî</div>
                    <div class="text">CEO Fired</div>
                </div>
                <div class="collapse-icon">
                    <div class="emoji">üìâ</div>
                    <div class="text">IPO Cancelled</div>
                </div>
            </div>
            <p style="margin-top: 60px; font-size: 1.5rem; color: var(--theme-color);">"Growth means nothing without unit economics"</p>
        </div>
    </StandardSlide>

    <StandardSlide id="6" narrationKey="6" title="Tonight's Mission">
        <h2>Tonight We'll Calculate</h2>
        <ul class="content-list">
            <li><strong>LTV:</strong> How much is a customer worth?</li>
            <li><strong>COCA:</strong> How much does it cost to get one?</li>
            <li><strong>The Ratio:</strong> Is this business viable?</li>
        </ul>
    </StandardSlide>

    <!-- STEP 17: LTV -->
    <StatementSlide id="7" narrationKey="7" section="Step 17" title="Step 17 Intro">
        Step 17: <span class="accent">Calculate Lifetime Value (LTV)</span>
    </StatementSlide>

    <TwoPartSlide id="8" narrationKey="8" title="What is LTV">
        <p class="primary">Customer Lifetime Value</p>
        <p class="secondary">The total <span class="accent">profit</span> from an average customer over your entire relationship with them.</p>
        <p class="tertiary" style="margin-top: 40px;">Not revenue‚Äîprofit. After your costs to serve them.</p>
    </TwoPartSlide>

    <StandardSlide id="9" narrationKey="9" title="Why LTV Matters">
        <h2>LTV Tells You...</h2>
        <ul class="content-list">
            <li>How much you can <strong>afford</strong> to spend acquiring customers</li>
            <li>Whether customers are <strong>valuable enough</strong> to sustain a business</li>
            <li>Why <strong>retention</strong> is so important</li>
        </ul>
    </StandardSlide>

    <StandardSlide id="10" narrationKey="10" title="The LTV Formula" type="visual">
        <div class="formula-display">
            <p class="formula"><span>LTV</span> = (ARPU √ó Gross Margin) √ó Lifespan</p>
        </div>
        <div style="display: flex; justify-content: center; gap: 80px; margin-top: 60px; flex-wrap: wrap;">
            <div style="text-align: center;">
                <div style="font-size: 1.5rem; color: var(--theme-color); margin-bottom: 10px; font-family: var(--font-display);">ARPU</div>
                <div style="color: var(--text-secondary);">Avg Revenue<br/>Per User</div>
            </div>
            <div style="text-align: center;">
                <div style="font-size: 1.5rem; color: var(--theme-color); margin-bottom: 10px; font-family: var(--font-display);">Margin</div>
                <div style="color: var(--text-secondary);">Revenue<br/>minus costs</div>
            </div>
            <div style="text-align: center;">
                <div style="font-size: 1.5rem; color: var(--theme-color); margin-bottom: 10px; font-family: var(--font-display);">Lifespan</div>
                <div style="color: var(--text-secondary);">Months as<br/>customer</div>
            </div>
        </div>
    </StandardSlide>

    <TwoPartSlide id="11" narrationKey="11" title="ARPU">
        <p class="primary">ARPU: Average Revenue Per User</p>
        <p class="secondary">What does the average customer pay per month/year?</p>
    </TwoPartSlide>

    <TwoPartSlide id="12" narrationKey="12" title="Gross Margin">
        <p class="primary">Gross Margin</p>
        <p class="secondary">Revenue minus direct costs to serve each customer</p>
        <div style="margin-top: 50px; padding: 20px 30px; background: var(--dark-surface); border-radius: 12px; display: inline-block;">
            <span style="color: var(--text-secondary);">Typical:</span>
            <span style="color: var(--theme-color); margin-left: 15px; font-weight: 600;">60-80% for SaaS</span>
        </div>
    </TwoPartSlide>

    <!-- Slide 13: Customer Lifespan -->
    <StandardSlide id="13" narrationKey="13" title="Customer Lifespan" type="visual">
        <div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin: 50px 0; flex-wrap: wrap;">
            <div style="text-align: center; padding: 30px; background: var(--dark-surface); border-radius: 16px;">
                <div style="font-size: 2rem; margin-bottom: 10px;">üéâ</div>
                <div style="color: var(--success-green);">Customer<br/>Acquired</div>
            </div>
            <div style="font-size: 2rem; color: var(--text-secondary);">‚Üí ‚Üí ‚Üí</div>
            <div style="text-align: center; padding: 30px; background: var(--dark-surface); border-radius: 16px; width: 200px;">
                <div style="font-size: 2rem; margin-bottom: 10px;">üìÖ</div>
                <div style="color: var(--theme-color);">Months of<br/>Usage</div>
            </div>
            <div style="font-size: 2rem; color: var(--text-secondary);">‚Üí ‚Üí ‚Üí</div>
            <div style="text-align: center; padding: 30px; background: var(--dark-surface); border-radius: 16px;">
                <div style="font-size: 2rem; margin-bottom: 10px;">üëã</div>
                <div style="color: var(--danger-red);">Customer<br/>Churns</div>
            </div>
        </div>
        <div class="formula-display" style="max-width: 500px;">
            <p class="formula" style="font-size: 1.8rem;"><span>Lifespan</span> = 1 √∑ Monthly Churn Rate</p>
        </div>
        <p style="text-align: center; margin-top: 30px; color: var(--text-secondary); font-size: 1.2rem;">
            Example: 5% monthly churn = <span style="color: var(--theme-color);">20 month</span> lifespan
        </p>
    </StandardSlide>

    <!-- Slide 14: Power of Retention -->
    <StandardSlide id="14" narrationKey="14" title="Power of Retention" type="visual">
        <h2>Small Churn Changes = Huge LTV Changes</h2>
        <p style="text-align: center; color: var(--text-secondary); margin-bottom: 20px;">At $50 ARPU, 70% margin</p>
        <div class="retention-bars">
            <div class="retention-row">
                <div class="retention-label">10%/mo churn<br/>10 mo lifespan</div>
                <div class="retention-bar-container">
                    <div class="retention-bar" style="width: 20%;"></div>
                </div>
                <div class="retention-value">$350</div>
            </div>
            <div class="retention-row">
                <div class="retention-label">5%/mo churn<br/>20 mo lifespan</div>
                <div class="retention-bar-container">
                    <div class="retention-bar" style="width: 40%;"></div>
                </div>
                <div class="retention-value">$700</div>
            </div>
            <div class="retention-row">
                <div class="retention-label">2%/mo churn<br/>50 mo lifespan</div>
                <div class="retention-bar-container">
                    <div class="retention-bar" style="width: 100%;"></div>
                </div>
                <div class="retention-value">$1,750</div>
            </div>
        </div>
        <p style="text-align: center; margin-top: 40px; font-size: 1.8rem; color: var(--theme-color); font-weight: 600;">Retention is everything.</p>
    </StandardSlide>

    <!-- Slide 15: LTV Example -->
    <StandardSlide id="15" narrationKey="15" title="LTV Example" type="visual">
        <h2>Example LTV Calculation</h2>
        <div class="calculation-steps">
            <div class="calc-step">
                <span class="label">ARPU (monthly)</span>
                <span class="value">$50</span>
            </div>
            <div class="calc-step">
                <span class="label">Gross Margin</span>
                <span class="value">70%</span>
            </div>
            <div class="calc-step">
                <span class="label">Monthly Churn</span>
                <span class="value">5%</span>
            </div>
            <div class="calc-step">
                <span class="label">Lifespan (1 √∑ 0.05)</span>
                <span class="value">20 months</span>
            </div>
            <div class="calc-step result">
                <span class="label">LTV = $50 √ó 0.70 √ó 20</span>
                <span class="value">$700</span>
            </div>
        </div>
    </StandardSlide>

    <!-- Slide 16: LTV Workshop -->
    <StatementSlide id="16" narrationKey="16" title="LTV Workshop">
        <p style="font-size: 3rem; font-weight: 700;">Calculate YOUR LTV</p>
        <p class="secondary" style="margin-top: 30px;">15 minutes: ARPU, Margin, Lifespan, LTV</p>
    </StatementSlide>

    <!-- STEPS 18-19: SALES & COCA -->
    <StatementSlide id="17" narrationKey="17" section="Steps 18-19" title="Steps 18-19 Intro">
        <p class="section-label">Steps 18-19</p>
        <p style="font-size: 3rem; font-weight: 700;">Sales Process & COCA</p>
    </StatementSlide>

    <!-- Slide 18: Sales Funnel (visualization placeholder) -->
    <StandardSlide id="18" narrationKey="18" title="Sales Funnel" type="visual">
        <h2>Understanding Your Sales Process</h2>
        <div class="visualization" id="funnel-viz"></div>
    </StandardSlide>

    <!-- Slide 19: Funnel Math -->
    <StandardSlide id="19" narrationKey="19" title="Funnel Math" type="visual">
        <h2>Working Backwards</h2>
        <div style="max-width: 600px; margin: 0 auto; text-align: center;">
            <div class="calc-step" style="opacity: 1; transform: none; margin-bottom: 30px;">
                <span class="label">Goal: Customers/month</span>
                <span class="value">20</span>
            </div>
            <div style="font-size: 2rem; color: var(--text-secondary); margin: 20px 0;">‚Üë</div>
            <div class="calc-step" style="opacity: 1; transform: none; margin-bottom: 30px;">
                <span class="label">Close rate (6% of leads)</span>
                <span class="value">6%</span>
            </div>
            <div style="font-size: 2rem; color: var(--text-secondary); margin: 20px 0;">‚Üë</div>
            <div class="calc-step result" style="opacity: 1; transform: none;">
                <span class="label">Leads needed per month</span>
                <span class="value">333</span>
            </div>
        </div>
        <p style="text-align: center; margin-top: 40px; font-size: 1.3rem; color: var(--theme-color);">This tells you what marketing must deliver.</p>
    </StandardSlide>

    <!-- Slide 20: What is COCA -->
    <TwoPartSlide id="20" narrationKey="20" title="What is COCA">
        <p class="primary">COCA: Cost of Customer Acquisition</p>
        <p class="secondary">Total cost to acquire one new paying customer</p>
        <div class="formula-display" style="margin-top: 50px; max-width: 700px;">
            <p class="formula" style="font-size: 1.6rem;"><span>COCA</span> = (Marketing + Sales Costs) √∑ Customers Acquired</p>
        </div>
        <div style="display: flex; justify-content: center; align-items: center; gap: 40px; margin-top: 50px;">
            <div style="font-size: 4rem;">üí∞</div>
            <div style="font-size: 2rem; color: var(--text-secondary);">‚Üí</div>
            <div style="font-size: 4rem;">üë§</div>
        </div>
    </TwoPartSlide>

    <!-- Slide 21: COCA Components -->
    <StandardSlide id="21" narrationKey="21" title="COCA Components" type="visual">
        <h2>What Goes Into COCA?</h2>
        <div class="components-grid">
            <div class="component-box">
                <h3>üì£ Marketing</h3>
                <ul>
                    <li>Paid ads</li>
                    <li>Content creation</li>
                    <li>Events & sponsorships</li>
                    <li>Marketing tools</li>
                    <li>Marketing salaries</li>
                </ul>
            </div>
            <div class="component-box">
                <h3>ü§ù Sales</h3>
                <ul>
                    <li>Sales salaries</li>
                    <li>Commissions</li>
                    <li>Travel & meetings</li>
                    <li>CRM & tools</li>
                    <li>Sales enablement</li>
                </ul>
            </div>
        </div>
        <p style="text-align: center; color: var(--warning, #eab308); font-size: 1.2rem; margin-top: 20px;">‚ö†Ô∏è Don't forget founder time!</p>
    </StandardSlide>

    <!-- Slide 22: Founder Time -->
    <TwoPartSlide id="22" narrationKey="22" title="Founder Time">
        <p class="primary">Include Your Time</p>
        <p class="secondary">If you spend 20 hours/week selling, that has a cost</p>
        <div class="calculation-steps" style="margin-top: 50px; max-width: 500px;">
            <div class="calc-step" style="opacity: 1; transform: none;">
                <span class="label">Weekly hours selling</span>
                <span class="value">20 hrs</span>
            </div>
            <div class="calc-step" style="opacity: 1; transform: none;">
                <span class="label">√ó Opportunity cost</span>
                <span class="value">$100/hr</span>
            </div>
            <div class="calc-step" style="opacity: 1; transform: none;">
                <span class="label">= Weekly cost</span>
                <span class="value">$2,000</span>
            </div>
            <div class="calc-step result" style="opacity: 1; transform: none;">
                <span class="label">Monthly founder sales cost</span>
                <span class="value">$8,000</span>
            </div>
        </div>
        <p class="tertiary" style="margin-top: 30px;">Most founders undercount this</p>
    </TwoPartSlide>

    <!-- Slide 23: COCA Example -->
    <StandardSlide id="23" narrationKey="23" title="COCA Example" type="visual">
        <h2>Example COCA Calculation</h2>
        <table class="costs-table">
            <thead>
                <tr>
                    <th>Category</th>
                    <th>Monthly Cost</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Paid ads</td>
                    <td>$3,000</td>
                </tr>
                <tr>
                    <td>Content creation</td>
                    <td>$1,000</td>
                </tr>
                <tr>
                    <td>Founder time</td>
                    <td>$4,000</td>
                </tr>
                <tr>
                    <td>Tools & software</td>
                    <td>$500</td>
                </tr>
                <tr class="total">
                    <td>Total</td>
                    <td>$8,500</td>
                </tr>
            </tbody>
        </table>
        <div style="text-align: center; margin-top: 30px;">
            <p style="color: var(--text-secondary); font-size: 1.2rem;">√∑ 10 customers/month</p>
            <p style="font-size: 2.5rem; color: var(--theme-color); font-weight: 700; margin-top: 20px; font-family: var(--font-mono);">COCA = $850</p>
        </div>
    </StandardSlide>

    <!-- Slide 24: COCA Workshop -->
    <StatementSlide id="24" narrationKey="24" title="COCA Workshop">
        <p style="font-size: 3rem; font-weight: 700;">Calculate YOUR COCA</p>
        <p class="secondary" style="margin-top: 30px;">10 minutes: All costs, customer projection, COCA</p>
    </StatementSlide>

    <!-- THE RATIO -->
    <!-- Slide 25: The Ratio -->
    <StandardSlide id="25" narrationKey="25" section="Ratio" title="The Ratio" type="visual">
        <h2>The Moment of Truth</h2>
        <div class="formula-display pulse" style="margin-top: 80px;">
            <p class="formula" style="font-size: 3.5rem;"><span>LTV</span> √∑ <span>COCA</span> > 3</p>
        </div>
        <p style="text-align: center; margin-top: 50px; font-size: 1.5rem; color: var(--text-secondary);">
            Your LTV should be <span style="color: var(--theme-color); font-weight: 700;">at least 3x</span> your COCA
        </p>
    </StandardSlide>

    <!-- Slide 26: Interpreting Ratio (visualization placeholder) -->
    <StandardSlide id="26" narrationKey="26" title="Interpreting Ratio" type="visual">
        <h2>Interpreting Your Ratio</h2>
        <div class="visualization" id="ratio-gauge"></div>
    </StandardSlide>

    <!-- Slide 27: Fixing Bad Ratio -->
    <StandardSlide id="27" narrationKey="27" title="Fixing Bad Ratio" type="visual">
        <h2>If Your Ratio Is Bad... You Have Options</h2>
        <div class="levers-grid">
            <div class="lever-column">
                <h3>‚¨ÜÔ∏è Increase LTV</h3>
                <div class="lever-item"><span class="icon">üíµ</span><span class="text">Raise prices</span></div>
                <div class="lever-item"><span class="icon">üîí</span><span class="text">Reduce churn</span></div>
                <div class="lever-item"><span class="icon">‚ûï</span><span class="text">Add upsells</span></div>
                <div class="lever-item"><span class="icon">‚úÇÔ∏è</span><span class="text">Cut serving costs</span></div>
            </div>
            <div class="lever-column decrease">
                <h3>‚¨áÔ∏è Decrease COCA</h3>
                <div class="lever-item"><span class="icon">üì¢</span><span class="text">Cheaper channels</span></div>
                <div class="lever-item"><span class="icon">üìà</span><span class="text">Better conversion</span></div>
                <div class="lever-item"><span class="icon">üó£Ô∏è</span><span class="text">Referrals/virality</span></div>
                <div class="lever-item"><span class="icon">‚ö°</span><span class="text">Shorter sales cycle</span></div>
            </div>
        </div>
    </StandardSlide>

    <!-- Slide 28: Retention Lever -->
    <StandardSlide id="28" narrationKey="28" title="Retention Lever" type="visual">
        <h2>Retention is Usually the Biggest Lever</h2>
        <div style="max-width: 700px; margin: 60px auto; text-align: center;">
            <div style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, transparent 100%); border: 1px solid rgba(16, 185, 129, 0.3); padding: 40px; border-radius: 20px; margin-bottom: 40px;">
                <p style="font-size: 1.5rem; color: var(--text-secondary); margin-bottom: 20px;">Cutting churn from 5% to 3%</p>
                <p style="font-size: 3rem; font-weight: 700; color: var(--success-green);">LTV increases 67%</p>
            </div>
            <p style="color: var(--text-secondary); font-size: 1.3rem;">Same effort on other levers = smaller impact</p>
            <p style="color: var(--theme-color); font-size: 1.8rem; font-weight: 600; margin-top: 40px;">Focus on keeping customers.</p>
        </div>
    </StandardSlide>

    <!-- Slide 29: Zoom vs WeWork -->
    <StandardSlide id="29" narrationKey="29" title="Zoom vs WeWork" type="visual">
        <h2 style="text-align: center; margin-bottom: 30px;">Why Unit Economics Determine Destiny</h2>
        <ComparisonGrid>
            <ComparisonCard title="WeWork" variant="danger">
                <ul>
                    <li>High COCA (real estate, buildout)</li>
                    <li>Uncertain LTV (high churn)</li>
                    <li>Ratio: &lt; 1</li>
                    <li style="color: var(--danger-red); font-weight: 600;">Result: Collapse</li>
                </ul>
            </ComparisonCard>
            <ComparisonCard title="Zoom" variant="success">
                <ul>
                    <li>Low COCA (viral, free trial)</li>
                    <li>High LTV (sticky, expanding)</li>
                    <li>Ratio: ~8x</li>
                    <li style="color: var(--success-green); font-weight: 600;">Result: $100B+ company</li>
                </ul>
            </ComparisonCard>
        </ComparisonGrid>
    </StandardSlide>

    <!-- WRAP-UP -->
    <!-- Slide 30: Theme Complete -->
    <StandardSlide id="30" narrationKey="30" section="Wrapup" title="Theme Complete" type="visual">
        <h2 style="text-align: center;">Theme 4 Complete!</h2>
        <div style="text-align: center; margin-top: 40px;">
            <svg width="300" height="300" viewBox="0 0 300 300" style="margin: 0 auto;">
                <circle cx="150" cy="150" r="130" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="20"/>
                <circle cx="150" cy="150" r="130" fill="none" stroke="var(--theme-color)" stroke-width="20"
                        stroke-dasharray="272 544" stroke-dashoffset="136" stroke-linecap="round"/>
                <text x="150" y="140" text-anchor="middle" fill="var(--text-primary)" font-size="16" font-family="Montserrat">Theme 4</text>
                <text x="150" y="170" text-anchor="middle" fill="var(--theme-color)" font-size="20" font-weight="700" font-family="Montserrat">COMPLETE</text>
            </svg>
        </div>
        <p style="text-align: center; margin-top: 30px; font-size: 1.5rem; color: var(--text-secondary);">
            "How do you make money?" <span style="color: var(--success-green);">‚úì</span>
        </p>
        <div style="display: flex; justify-content: center; gap: 20px; margin-top: 30px; flex-wrap: wrap;">
            <span style="color: var(--success-green);">‚úì Pricing</span>
            <span style="color: var(--success-green);">‚úì LTV</span>
            <span style="color: var(--success-green);">‚úì COCA</span>
            <span style="color: var(--success-green);">‚úì Unit Economics</span>
        </div>
    </StandardSlide>

    <!-- Slide 31: Remember -->
    <StandardSlide id="31" narrationKey="31" title="Remember">
        <h2>Remember</h2>
        <ul class="content-list">
            <li><strong>LTV</strong> = value of a customer (profit, not revenue)</li>
            <li><strong>COCA</strong> = cost to acquire a customer (include ALL costs)</li>
            <li><strong>LTV/COCA &gt; 3</strong> for a healthy business</li>
            <li><strong>Retention</strong> is usually the biggest lever</li>
        </ul>
    </StandardSlide>

    <!-- Slide 32: Before Next Week -->
    <StandardSlide id="32" narrationKey="32" title="Before Next Week" type="visual">
        <h2>Before Next Week</h2>
        <div style="max-width: 700px; margin-top: 40px;">
            <div class="homework-item">
                <span class="homework-icon">üßÆ</span>
                <span class="homework-text">Complete LTV calculation (with documented assumptions)</span>
            </div>
            <div class="homework-item">
                <span class="homework-icon">üí∞</span>
                <span class="homework-text">Full COCA breakdown (don't forget founder time!)</span>
            </div>
            <div class="homework-item">
                <span class="homework-icon">üìä</span>
                <span class="homework-text">If ratio &lt; 3: Create improvement plan</span>
            </div>
            <div class="homework-item">
                <span class="homework-icon">üìñ</span>
                <span class="homework-text">Read: DE Chapters 20-23 (Testing & MVBP)</span>
            </div>
        </div>
    </StandardSlide>

    <!-- Slide 33: Next Week -->
    <TwoPartSlide id="33" narrationKey="33" title="Next Week">
        <p class="primary">Next Week: Testing & MVBP</p>
        <p class="secondary">What do you still need to prove?<br/>What's your Minimum Viable Business Product?</p>
        <div style="margin-top: 50px; padding: 20px 30px; background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 12px; display: inline-block;">
            <span style="color: #ef4444; font-weight: 600;">Theme 5: How do you design and build?</span>
        </div>
    </TwoPartSlide>

    <!-- APPENDIX SLIDES -->
    <Slide id="appendix-ltv-breakdown" title="LTV Breakdown" appendix={true}>
        <div class="slide-content">
            <h2>LTV Breakdown Factors</h2>
            <div class="ltv-breakdown">
                <div class="ltv-factor">
                    <h4>ARPU</h4>
                    <div class="range">$10 - $100k+</div>
                    <p>Price point determines sales model</p>
                </div>
                <div class="ltv-factor">
                    <h4>Gross Margin</h4>
                    <div class="range">60% - 90%</div>
                    <p>Software has high margins, services lower</p>
                </div>
                <div class="ltv-factor">
                    <h4>Churn</h4>
                    <div class="range">0.5% - 5% / mo</div>
                    <p>Lower churn = exponentially higher LTV</p>
                </div>
            </div>
        </div>
    </Slide>

    <script is:inline src={`${base}class-7-unit-economics/scripts.js`}></script>
</PresentationLayout>
